<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="807px" preserveAspectRatio="none" style="width:1045px;height:807px;" version="1.1" viewBox="0 0 1045 807" width="1045px" zoomAndPan="magnify"><defs><filter height="300%" id="fccfcm1ibf291" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="410.5" y="24.5332">Proposed Data Reading Process</text><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="549.2471" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="285.5" y="151.2188"/><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="399.354" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="434.5" y="263.7603"/><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="248.4609" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="621" y="377.3018"/><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="218.1094" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="858" y="377.3018"/><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="504.8955" style="stroke: #000000; stroke-width: 2.0;" width="793" x="241" y="166.5703"/><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="307.1641" style="stroke: #000000; stroke-width: 2.0;" width="641" x="383" y="326.9502"/><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="579.5" y="345.3018"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="586.5" y="366.835">DataSource</text><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="92" x="815" y="391.9111"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="822" y="413.4443">BandSource</text><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="120.8906" style="stroke: #000000; stroke-width: 2.0;" width="209" x="805" y="445.5205"/><rect fill="#FFFFFF" height="59.1875" style="stroke: none; stroke-width: 1.0;" width="209" x="805" y="507.2236"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="25" x2="25" y1="119.2188" y2="718.8174"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="290" x2="290" y1="119.2188" y2="718.8174"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="439" x2="439" y1="119.2188" y2="718.8174"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="625.5" x2="625.5" y1="378.6064" y2="718.8174"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="863" x2="863" y1="425.2158" y2="718.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="8" y="116.1426">User</text><ellipse cx="25.5" cy="44.6094" fill="#FEFECE" filter="url(#fccfcm1ibf291)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M25.5,52.6094 L25.5,79.6094 M12.5,60.6094 L38.5,60.6094 M25.5,79.6094 L12.5,94.6094 M25.5,79.6094 L38.5,94.6094 " fill="#FEFECE" filter="url(#fccfcm1ibf291)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="8" y="732.3506">User</text><ellipse cx="25.5" cy="745.4268" fill="#FEFECE" filter="url(#fccfcm1ibf291)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M25.5,753.4268 L25.5,780.4268 M12.5,761.4268 L38.5,761.4268 M25.5,780.4268 L12.5,795.4268 M25.5,780.4268 L38.5,795.4268 " fill="#FEFECE" filter="url(#fccfcm1ibf291)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="75" x="251" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="258" y="104.1426">Datacube</text><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="75" x="251" y="717.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="258" y="739.3506">Datacube</text><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="393" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="400" y="104.1426">DataLoader</text><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="393" y="717.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="400" y="739.3506">DataLoader</text><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="579.5" y="717.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="586.5" y="739.3506">DataSource</text><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="92" x="815" y="717.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="822" y="739.3506">BandSource</text><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="549.2471" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="285.5" y="151.2188"/><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="399.354" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="434.5" y="263.7603"/><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="248.4609" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="621" y="377.3018"/><rect fill="#FFFFFF" filter="url(#fccfcm1ibf291)" height="218.1094" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="858" y="377.3018"/><polygon fill="#2980B9" points="273.5,147.2188,283.5,151.2188,273.5,155.2188,277.5,151.2188" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="25.5" x2="279.5" y1="151.2188" y2="151.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="32.5" y="146.7139">Requests some data using dc.load_data()</text><rect fill="none" height="504.8955" style="stroke: #000000; stroke-width: 2.0;" width="793" x="241" y="166.5703"/><polygon fill="#BDE3FF" points="241,166.5703,314,166.5703,314,174.5703,304,184.5703,241,184.5703,241,166.5703" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="256" y="181.0654">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="223" x="329" y="179.9893">[for each time/irregular dimension slice]</text><line style="stroke: #2980B9; stroke-width: 1.0;" x1="295.5" x2="337.5" y1="207.2734" y2="207.2734"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="337.5" x2="337.5" y1="207.2734" y2="220.2734"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="296.5" x2="337.5" y1="220.2734" y2="220.2734"/><polygon fill="#2980B9" points="306.5,216.2734,296.5,220.2734,306.5,224.2734,302.5,220.2734" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="302.5" y="202.417">_fuse_measurement()</text><polygon fill="#2980B9" points="422.5,259.7603,432.5,263.7603,422.5,267.7603,426.5,263.7603" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="295.5" x2="428.5" y1="263.7603" y2="263.7603"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="302.5" y="259.2554">reproject_and_fuse()</text><polygon fill="#F1FFFF" filter="url(#fccfcm1ibf291)" points="449,233.2734,449,276.2734,800,276.2734,800,243.2734,790,233.2734,449,233.2734" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="790" x2="790" y1="233.2734" y2="243.2734"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="800" x2="790" y1="243.2734" y2="243.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="455" y="251.7686">DataLoader is not currently a class, it is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="455" y="268.7422">functions in the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="547" y="267.6948">datacube.storage.storage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="743" y="268.7422">module</text><polygon fill="#F1FFFF" filter="url(#fccfcm1ibf291)" points="340,290.5986,538,290.5986,548,302.5986,538,314.5986,340,314.5986,330,302.5986,340,290.5986" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="342" y="308.0938">create a destination array in RAM</text><rect fill="none" height="307.1641" style="stroke: #000000; stroke-width: 2.0;" width="641" x="383" y="326.9502"/><polygon fill="#BDE3FF" points="383,326.9502,456,326.9502,456,334.9502,446,344.9502,383,344.9502,383,326.9502" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="398" y="341.4453">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="471" y="340.3691">[for each DataSource]</text><polygon fill="#2980B9" points="567.5,363.3018,577.5,367.3018,567.5,371.3018,571.5,367.3018" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="444.5" x2="573.5" y1="367.3018" y2="367.3018"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="451.5" y="362.7969">read_from_source()</text><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="579.5" y="345.3018"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="586.5" y="366.835">DataSource</text><polygon fill="#2980B9" points="798,409.9111,808,413.9111,798,417.9111,802,413.9111" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="631" x2="804" y1="413.9111" y2="413.9111"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="638" y="409.4063">open() returns BandSource</text><rect fill="#BDE3FF" filter="url(#fccfcm1ibf291)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="92" x="815" y="391.9111"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="822" y="413.4443">BandSource</text><rect fill="none" height="120.8906" style="stroke: #000000; stroke-width: 2.0;" width="209" x="805" y="445.5205"/><polygon fill="#BDE3FF" points="805,445.5205,866,445.5205,866,453.5205,856,463.5205,805,463.5205,805,445.5205" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="820" y="460.0156">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="881" y="458.9395">[Non reprojecting read]</text><line style="stroke: #2980B9; stroke-width: 1.0;" x1="868" x2="910" y1="486.2236" y2="486.2236"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="910" x2="910" y1="486.2236" y2="499.2236"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="869" x2="910" y1="499.2236" y2="499.2236"/><polygon fill="#2980B9" points="879,495.2236,869,499.2236,879,503.2236,875,499.2236" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="875" y="481.3672">_read_decimated()</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="805" x2="1014" y1="508.2236" y2="508.2236"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="810" y="519.6426">[ReProjecting read]</text><line style="stroke: #2980B9; stroke-width: 1.0;" x1="868" x2="910" y1="545.4111" y2="545.4111"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="910" x2="910" y1="545.4111" y2="558.4111"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="869" x2="910" y1="558.4111" y2="558.4111"/><polygon fill="#2980B9" points="879,554.4111,869,558.4111,879,562.4111,875,558.4111" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="875" y="540.5547">reproject()</text><polygon fill="#2980B9" points="642,591.4111,632,595.4111,642,599.4111,638,595.4111" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="636" x2="862" y1="595.4111" y2="595.4111"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="648" y="590.9063">append data into destination array</text><polygon fill="#2980B9" points="455.5,621.7627,445.5,625.7627,455.5,629.7627,451.5,625.7627" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="449.5" x2="625" y1="625.7627" y2="625.7627"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="461.5" y="621.2578">return destination array</text><polygon fill="#2980B9" points="306.5,659.1143,296.5,663.1143,306.5,667.1143,302.5,663.1143" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300.5" x2="438.5" y1="663.1143" y2="663.1143"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="312.5" y="658.6094">return data</text><polygon fill="#2980B9" points="36.5,696.4658,26.5,700.4658,36.5,704.4658,32.5,700.4658" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="30.5" x2="289.5" y1="700.4658" y2="700.4658"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="42.5" y="695.9609">return data</text><!--
@startuml

skinparam backgroundColor white

skinparam note {
    BackgroundColor #F1FFFF
    BorderColor #2980B9
}

skinparam activity {
    BackgroundColor #BDE3FF
    ArrowColor #2980B9
    BorderColor #2980B9
    StartColor #227BC6
    EndColor #227BC6
    BarColor #227BC6
}

skinparam sequence {
    ArrowColor  #2980B9
    DividerBackgroundColor  #BDE3FF
    GroupBackgroundColor    #BDE3FF
    LifeLineBackgroundColor white
    LifeLineBorderColor #2980B9
    ParticipantBackgroundColor  #BDE3FF
    ParticipantBorderColor  #2980B9
    BoxLineColor    #2980B9
    BoxBackgroundColor  #DDDDDD
}

skinparam actorBackgroundColor #FEFECE
skinparam actorBorderColor    #A80036

skinparam usecaseArrowColor   #A80036
skinparam usecaseBackgroundColor  #FEFECE
skinparam usecaseBorderColor  #A80036

skinparam classArrowColor #A80036
skinparam classBackgroundColor    #FEFECE
skinparam classBorderColor    #A80036

skinparam objectArrowColor    #A80036
skinparam objectBackgroundColor   #FEFECE
skinparam objectBorderColor   #A80036

skinparam packageBackgroundColor  #FEFECE
skinparam packageBorderColor  #A80036

skinparam stereotypeCBackgroundColor  #ADD1B2
skinparam stereotypeABackgroundColor  #A9DCDF
skinparam stereotypeIBackgroundColor  #B4A7E5
skinparam stereotypeEBackgroundColor  #EB937F

skinparam componentArrowColor #A80036
skinparam componentBackgroundColor    #FEFECE
skinparam componentBorderColor    #A80036
skinparam componentInterfaceBackgroundColor   #FEFECE
skinparam componentInterfaceBorderColor   #A80036

skinparam stateBackgroundColor #BDE3FF
skinparam stateBorderColor #2980B9
skinparam stateArrowColor #2980B9
skinparam stateStartColor black
skinparam stateEndColor   black

title Proposed Data Reading Process
actor User


User -> Datacube: Requests some data using dc.load_data()
activate Datacube

loop for each time/irregular dimension slice
  Datacube -> Datacube: _fuse_measurement()
  Datacube -> DataLoader:  reproject_and_fuse()
  note right
    DataLoader is not currently a class, it is 
    functions in the ""datacube.storage.storage"" module
  end note
  activate DataLoader
  hnote over DataLoader : create a destination array in RAM
  loop for each DataSource
    create DataSource
    DataLoader -> DataSource: read_from_source()
    activate DataSource

    create BandSource
    activate BandSource
    DataSource -> BandSource: open() returns BandSource
    alt Non reprojecting read
        BandSource -> BandSource: _read_decimated()
    else ReProjecting read
        BandSource -> BandSource: reproject()
    end
    BandSource - -> DataSource: append data into destination array
    deactivate BandSource
    DataSource - -> DataLoader: return destination array
    deactivate DataSource
  end
  DataLoader - -> Datacube: return data
  deactivate DataLoader

end

Datacube - -> User: return data
deactivate Datacube


@enduml

PlantUML version 1.2017.19(Sun Nov 12 22:46:22 AEDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_121-b15
Operating System: Windows 7
OS Version: 6.1
Default Encoding: Cp1252
Language: en
Country: AU
--></g></svg>