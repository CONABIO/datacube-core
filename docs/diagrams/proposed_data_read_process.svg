<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="807px" preserveAspectRatio="none" style="width:1021px;height:807px;" version="1.1" viewBox="0 0 1021 807" width="1021px" zoomAndPan="magnify"><defs><filter height="300%" id="f1g0lmlkqbalry" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="398.5" y="24.5332">Proposed Data Reading Process</text><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="549.2471" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="261.5" y="151.2188"/><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="399.354" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="410.5" y="263.7603"/><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="248.4609" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="597" y="377.3018"/><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="218.1094" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="834" y="377.3018"/><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="504.8955" style="stroke: #000000; stroke-width: 2.0;" width="793" x="217" y="166.5703"/><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="307.1641" style="stroke: #000000; stroke-width: 2.0;" width="641" x="359" y="326.9502"/><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="555.5" y="345.3018"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="562.5" y="366.835">DataSource</text><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="92" x="791" y="391.9111"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="798" y="413.4443">BandSource</text><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="120.8906" style="stroke: #000000; stroke-width: 2.0;" width="209" x="781" y="445.5205"/><rect fill="#FFFFFF" height="59.1875" style="stroke: none; stroke-width: 1.0;" width="209" x="781" y="507.2236"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="25" x2="25" y1="119.2188" y2="718.8174"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="266" x2="266" y1="119.2188" y2="718.8174"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="415" x2="415" y1="119.2188" y2="718.8174"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="601.5" x2="601.5" y1="378.6064" y2="718.8174"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="839" x2="839" y1="425.2158" y2="718.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="8" y="116.1426">User</text><ellipse cx="25.5" cy="44.6094" fill="#FEFECE" filter="url(#f1g0lmlkqbalry)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M25.5,52.6094 L25.5,79.6094 M12.5,60.6094 L38.5,60.6094 M25.5,79.6094 L12.5,94.6094 M25.5,79.6094 L38.5,94.6094 " fill="#FEFECE" filter="url(#f1g0lmlkqbalry)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="8" y="732.3506">User</text><ellipse cx="25.5" cy="745.4268" fill="#FEFECE" filter="url(#f1g0lmlkqbalry)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M25.5,753.4268 L25.5,780.4268 M12.5,761.4268 L38.5,761.4268 M25.5,780.4268 L12.5,795.4268 M25.5,780.4268 L38.5,795.4268 " fill="#FEFECE" filter="url(#f1g0lmlkqbalry)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="75" x="227" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="234" y="104.1426">Datacube</text><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="75" x="227" y="717.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="234" y="739.3506">Datacube</text><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="369" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="376" y="104.1426">DataLoader</text><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="369" y="717.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="376" y="739.3506">DataLoader</text><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="555.5" y="717.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="562.5" y="739.3506">DataSource</text><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="92" x="791" y="717.8174"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="798" y="739.3506">BandSource</text><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="549.2471" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="261.5" y="151.2188"/><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="399.354" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="410.5" y="263.7603"/><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="248.4609" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="597" y="377.3018"/><rect fill="#FFFFFF" filter="url(#f1g0lmlkqbalry)" height="218.1094" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="834" y="377.3018"/><polygon fill="#2980B9" points="249.5,147.2188,259.5,151.2188,249.5,155.2188,253.5,151.2188" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="25.5" x2="255.5" y1="151.2188" y2="151.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="32.5" y="146.7139">Requests some data from load_data()</text><rect fill="none" height="504.8955" style="stroke: #000000; stroke-width: 2.0;" width="793" x="217" y="166.5703"/><polygon fill="#BDE3FF" points="217,166.5703,290,166.5703,290,174.5703,280,184.5703,217,184.5703,217,166.5703" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="232" y="181.0654">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="223" x="305" y="179.9893">[for each time/irregular dimension slice]</text><line style="stroke: #2980B9; stroke-width: 1.0;" x1="271.5" x2="313.5" y1="207.2734" y2="207.2734"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="313.5" x2="313.5" y1="207.2734" y2="220.2734"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="272.5" x2="313.5" y1="220.2734" y2="220.2734"/><polygon fill="#2980B9" points="282.5,216.2734,272.5,220.2734,282.5,224.2734,278.5,220.2734" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="278.5" y="202.417">_fuse_measurement()</text><polygon fill="#2980B9" points="398.5,259.7603,408.5,263.7603,398.5,267.7603,402.5,263.7603" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="271.5" x2="404.5" y1="263.7603" y2="263.7603"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="278.5" y="259.2554">reproject_and_fuse()</text><polygon fill="#F1FFFF" filter="url(#f1g0lmlkqbalry)" points="425,233.2734,425,276.2734,776,276.2734,776,243.2734,766,233.2734,425,233.2734" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="766" x2="766" y1="233.2734" y2="243.2734"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="776" x2="766" y1="243.2734" y2="243.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="431" y="251.7686">DataLoader is not currently a class, it is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="431" y="268.7422">functions in the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="523" y="267.6948">datacube.storage.storage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="719" y="268.7422">module</text><polygon fill="#F1FFFF" filter="url(#f1g0lmlkqbalry)" points="316,290.5986,514,290.5986,524,302.5986,514,314.5986,316,314.5986,306,302.5986,316,290.5986" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="318" y="308.0938">create a destination array in RAM</text><rect fill="none" height="307.1641" style="stroke: #000000; stroke-width: 2.0;" width="641" x="359" y="326.9502"/><polygon fill="#BDE3FF" points="359,326.9502,432,326.9502,432,334.9502,422,344.9502,359,344.9502,359,326.9502" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="374" y="341.4453">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="447" y="340.3691">[for each DataSource]</text><polygon fill="#2980B9" points="543.5,363.3018,553.5,367.3018,543.5,371.3018,547.5,367.3018" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="420.5" x2="549.5" y1="367.3018" y2="367.3018"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="427.5" y="362.7969">read_from_source()</text><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="89" x="555.5" y="345.3018"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="562.5" y="366.835">DataSource</text><polygon fill="#2980B9" points="774,409.9111,784,413.9111,774,417.9111,778,413.9111" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="607" x2="780" y1="413.9111" y2="413.9111"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="614" y="409.4063">open() returns BandSource</text><rect fill="#BDE3FF" filter="url(#f1g0lmlkqbalry)" height="31.6094" style="stroke: #2980B9; stroke-width: 1.5;" width="92" x="791" y="391.9111"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="798" y="413.4443">BandSource</text><rect fill="none" height="120.8906" style="stroke: #000000; stroke-width: 2.0;" width="209" x="781" y="445.5205"/><polygon fill="#BDE3FF" points="781,445.5205,842,445.5205,842,453.5205,832,463.5205,781,463.5205,781,445.5205" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="796" y="460.0156">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="857" y="458.9395">[Non reprojecting read]</text><line style="stroke: #2980B9; stroke-width: 1.0;" x1="844" x2="886" y1="486.2236" y2="486.2236"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="886" x2="886" y1="486.2236" y2="499.2236"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="845" x2="886" y1="499.2236" y2="499.2236"/><polygon fill="#2980B9" points="855,495.2236,845,499.2236,855,503.2236,851,499.2236" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="851" y="481.3672">_read_decimated()</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="781" x2="990" y1="508.2236" y2="508.2236"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="786" y="519.6426">[ReProjecting read]</text><line style="stroke: #2980B9; stroke-width: 1.0;" x1="844" x2="886" y1="545.4111" y2="545.4111"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="886" x2="886" y1="545.4111" y2="558.4111"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="845" x2="886" y1="558.4111" y2="558.4111"/><polygon fill="#2980B9" points="855,554.4111,845,558.4111,855,562.4111,851,558.4111" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="851" y="540.5547">reproject()</text><polygon fill="#2980B9" points="618,591.4111,608,595.4111,618,599.4111,614,595.4111" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612" x2="838" y1="595.4111" y2="595.4111"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="624" y="590.9063">append data into destination array</text><polygon fill="#2980B9" points="431.5,621.7627,421.5,625.7627,431.5,629.7627,427.5,625.7627" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="425.5" x2="601" y1="625.7627" y2="625.7627"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="437.5" y="621.2578">return destination array</text><polygon fill="#2980B9" points="282.5,659.1143,272.5,663.1143,282.5,667.1143,278.5,663.1143" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="276.5" x2="414.5" y1="663.1143" y2="663.1143"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="288.5" y="658.6094">return data</text><polygon fill="#2980B9" points="36.5,696.4658,26.5,700.4658,36.5,704.4658,32.5,700.4658" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="30.5" x2="265.5" y1="700.4658" y2="700.4658"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="42.5" y="695.9609">return data</text><!--
@startuml

skinparam backgroundColor white

skinparam note {
    BackgroundColor #F1FFFF
    BorderColor #2980B9
}

skinparam activity {
    BackgroundColor #BDE3FF
    ArrowColor #2980B9
    BorderColor #2980B9
    StartColor #227BC6
    EndColor #227BC6
    BarColor #227BC6
}

skinparam sequence {
    ArrowColor  #2980B9
    DividerBackgroundColor  #BDE3FF
    GroupBackgroundColor    #BDE3FF
    LifeLineBackgroundColor white
    LifeLineBorderColor #2980B9
    ParticipantBackgroundColor  #BDE3FF
    ParticipantBorderColor  #2980B9
    BoxLineColor    #2980B9
    BoxBackgroundColor  #DDDDDD
}

skinparam actorBackgroundColor #FEFECE
skinparam actorBorderColor    #A80036

skinparam usecaseArrowColor   #A80036
skinparam usecaseBackgroundColor  #FEFECE
skinparam usecaseBorderColor  #A80036

skinparam classArrowColor #A80036
skinparam classBackgroundColor    #FEFECE
skinparam classBorderColor    #A80036

skinparam objectArrowColor    #A80036
skinparam objectBackgroundColor   #FEFECE
skinparam objectBorderColor   #A80036

skinparam packageBackgroundColor  #FEFECE
skinparam packageBorderColor  #A80036

skinparam stereotypeCBackgroundColor  #ADD1B2
skinparam stereotypeABackgroundColor  #A9DCDF
skinparam stereotypeIBackgroundColor  #B4A7E5
skinparam stereotypeEBackgroundColor  #EB937F

skinparam componentArrowColor #A80036
skinparam componentBackgroundColor    #FEFECE
skinparam componentBorderColor    #A80036
skinparam componentInterfaceBackgroundColor   #FEFECE
skinparam componentInterfaceBorderColor   #A80036

skinparam stateBackgroundColor #BDE3FF
skinparam stateBorderColor #2980B9
skinparam stateArrowColor #2980B9
skinparam stateStartColor black
skinparam stateEndColor   black

title Proposed Data Reading Process
actor User


User -> Datacube: Requests some data from load_data()
activate Datacube

loop for each time/irregular dimension slice
  Datacube -> Datacube: _fuse_measurement()
  Datacube -> DataLoader:  reproject_and_fuse()
  note right
    DataLoader is not currently a class, it is 
    functions in the ""datacube.storage.storage"" module
  end note
  activate DataLoader
  hnote over DataLoader : create a destination array in RAM
  loop for each DataSource
    create DataSource
    DataLoader -> DataSource: read_from_source()
    activate DataSource

    create BandSource
    activate BandSource
    DataSource -> BandSource: open() returns BandSource
    alt Non reprojecting read
        BandSource -> BandSource: _read_decimated()
    else ReProjecting read
        BandSource -> BandSource: reproject()
    end
    BandSource - -> DataSource: append data into destination array
    deactivate BandSource
    DataSource - -> DataLoader: return destination array
    deactivate DataSource
  end
  DataLoader - -> Datacube: return data
  deactivate DataLoader

end

Datacube - -> User: return data
deactivate Datacube


@enduml

PlantUML version 1.2017.19(Sun Nov 12 22:46:22 AEDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_121-b15
Operating System: Windows 7
OS Version: 6.1
Default Encoding: Cp1252
Language: en
Country: AU
--></g></svg>